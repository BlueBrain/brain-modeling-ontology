@prefix ns1: <http://www.w3.org/ns/shacl#> .
@prefix ns2: <https://bluebrain.github.io/nexus/vocabulary/> .
@prefix ns3: <http://www.w3.org/ns/prov#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

<https://neuroshapes.org/dash/tracegeneration> a ns2:Schema ;
    owl:imports <https://neuroshapes.org/commons/quantitativevalue>,
        <https://neuroshapes.org/commons/typedlabeledontologyterm>,
        <https://provshapes.org/commons/generation> ;
    ns3:wasDerivedFrom "https://github.com/INCF/neuroshapes/blob/v0.3.15/modules/electrophysiology/src/main/resources/schemas/neurosciencegraph/electrophysiology/tracegeneration/v1.0.0.json" ;
    ns2:shapes <https://neuroshapes.org/dash/tracegeneration/shapes/ConverterShape>,
        <https://neuroshapes.org/dash/tracegeneration/shapes/DigitalToAnalogConverterShape>,
        <https://neuroshapes.org/dash/tracegeneration/shapes/TraceGenerationShape> .

<https://neuroshapes.org/dash/tracegeneration/shapes/TraceGenerationShape> a ns1:NodeShape ;
    rdfs:label "Trace generation shape definition"^^xsd:string ;
    ns1:and ( [ ns1:node <https://provshapes.org/commons/generation/shapes/GenerationShape> ] [ ns1:property [ ns1:description "Series resistance compensation while patching cell." ;
                        ns1:maxCount 1 ;
                        ns1:name "Series resistance" ;
                        ns1:node <https://neuroshapes.org/commons/quantitativevalue/shapes/QuantitativeValueShape> ;
                        ns1:path <https://neuroshapes.org/seriesResistance> ],
                    [ ns1:datatype xsd:string ;
                        ns1:description "Laboratory name of the experiment." ;
                        ns1:maxCount 1 ;
                        ns1:name "Provider experiment name" ;
                        ns1:path <https://neuroshapes.org/providerExperimentName> ],
                    [ ns1:description "Settings of analog-to-digital converter" ;
                        ns1:maxCount 1 ;
                        ns1:name "Analog-to-digital converter settings" ;
                        ns1:node <https://neuroshapes.org/dash/tracegeneration/shapes/ConverterShape> ;
                        ns1:path <https://neuroshapes.org/analogToDigitalConverter> ],
                    [ ns1:description "Target holding potential of patched cell." ;
                        ns1:maxCount 1 ;
                        ns1:name "Target holding potential" ;
                        ns1:node <https://neuroshapes.org/commons/quantitativevalue/shapes/QuantitativeValueShape> ;
                        ns1:path <https://neuroshapes.org/targetHoldingPotential> ],
                    [ ns1:description "Settings of digital-to-analog converter" ;
                        ns1:maxCount 1 ;
                        ns1:name "Digital-to-analog converter settings" ;
                        ns1:node <https://neuroshapes.org/dash/tracegeneration/shapes/DigitalToAnalogConverterShape> ;
                        ns1:path <https://neuroshapes.org/digitalToAnalogConverter> ],
                    [ ns1:description "Input resistance of patched cell." ;
                        ns1:maxCount 1 ;
                        ns1:name "Input resistance" ;
                        ns1:node <https://neuroshapes.org/commons/quantitativevalue/shapes/QuantitativeValueShape> ;
                        ns1:path <https://neuroshapes.org/inputResistance> ],
                    [ ns1:description "Compensation current for series resistance." ;
                        ns1:maxCount 1 ;
                        ns1:name "Compensation current" ;
                        ns1:node <https://neuroshapes.org/commons/quantitativevalue/shapes/QuantitativeValueShape> ;
                        ns1:path <https://neuroshapes.org/compensationCurrent> ],
                    [ ns1:class <https://neuroshapes.org/StimulusExperiment> ;
                        ns1:description "Points at stimulus experiment activity that generated trace." ;
                        ns1:maxCount 1 ;
                        ns1:minCount 1 ;
                        ns1:name "Activity" ;
                        ns1:path ns3:activity ],
                    [ ns1:datatype xsd:integer ;
                        ns1:description "Sweep number of the trace." ;
                        ns1:maxCount 1 ;
                        ns1:minCount 1 ;
                        ns1:name "Sweep" ;
                        ns1:path <https://neuroshapes.org/sweep> ],
                    [ ns1:description "Measured holding potential of patched cell." ;
                        ns1:maxCount 1 ;
                        ns1:name "Measured holding potential" ;
                        ns1:node <https://neuroshapes.org/commons/quantitativevalue/shapes/RepeatedQuantitativeValueShape> ;
                        ns1:path <https://neuroshapes.org/measuredHoldingPotential> ],
                    [ ns1:datatype xsd:integer ;
                        ns1:description "Repetition." ;
                        ns1:maxCount 1 ;
                        ns1:name "Repetition" ;
                        ns1:path <https://neuroshapes.org/repetition> ],
                    [ ns1:datatype xsd:string ;
                        ns1:description "Laboratory identifier of the experiment." ;
                        ns1:maxCount 1 ;
                        ns1:name "Provider experiment ID" ;
                        ns1:path <https://neuroshapes.org/providerExperimentId> ] ] ) ;
    ns1:nodeKind ns1:BlankNodeOrIRI ;
    ns1:targetClass <https://neuroshapes.org/TraceGeneration> .

<https://neuroshapes.org/dash/tracegeneration/shapes/DigitalToAnalogConverterShape> a ns1:NodeShape ;
    ns1:and ( [ ns1:node <https://neuroshapes.org/dash/tracegeneration/shapes/ConverterShape> ] [ ns1:property [ ns1:datatype xsd:float ;
                        ns1:maxCount 1 ;
                        ns1:minCount 1 ;
                        ns1:name "Scale" ;
                        ns1:path <https://neuroshapes.org/scale> ] ] ) .

<https://neuroshapes.org/dash/tracegeneration/shapes/ConverterShape> a ns1:NodeShape ;
    ns1:property [ ns1:description "Name of the converter" ;
            ns1:maxCount 1 ;
            ns1:name "Name" ;
            ns1:path <http://schema.org/name> ],
        [ ns1:datatype xsd:float ;
            ns1:maxCount 1 ;
            ns1:minCount 1 ;
            ns1:name "Gain" ;
            ns1:path <https://neuroshapes.org/gain> ],
        [ ns1:maxCount 1 ;
            ns1:minCount 1 ;
            ns1:name "Unit" ;
            ns1:node <https://neuroshapes.org/commons/typedlabeledontologyterm/shapes/UnitOntologyTermShape> ;
            ns1:path <http://schema.org/unitCode> ] .

