@prefix ns1: <http://www.w3.org/ns/shacl#> .
@prefix ns2: <https://bluebrain.github.io/nexus/vocabulary/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

<https://neuroshapes.org/commons/distribution> a ns2:Schema ;
    owl:imports <https://neuroshapes.org/commons/quantitativevalue> ;
    ns2:shapes <https://neuroshapes.org/commons/distribution/shapes/DigestShape>,
        <https://neuroshapes.org/commons/distribution/shapes/DistributionShape> .

<https://neuroshapes.org/commons/distribution/shapes/DistributionShape> a ns1:NodeShape ;
    ns1:and ( [ ns1:or ( [ ns1:property [ ns1:description "When followed this link leads to the actual data." ;
                                    ns1:maxCount 1 ;
                                    ns1:minCount 1 ;
                                    ns1:nodeKind ns1:IRI ;
                                    ns1:path <http://schema.org/contentUrl> ] ] [ ns1:property [ ns1:description "When followed this link leads to a resource providing further description on how to download the attached data." ;
                                    ns1:maxCount 1 ;
                                    ns1:minCount 1 ;
                                    ns1:nodeKind ns1:IRI ;
                                    ns1:path <http://schema.org/url> ] ] ) ] [ ns1:property [ ns1:description "A Link towards the distribution license." ;
                        ns1:path <http://schema.org/license> ],
                    [ rdfs:comment "The pattern used here is temporary and not complete. The media type values need to be taken from a controlled vocabulary: to be handled in a next iteration."^^xsd:string ;
                        ns1:datatype xsd:string ;
                        ns1:description "The media value should start with one of the following application|audio|font|image|message|model|multipart|text|video followed by / and then any Alphanumeric characters." ;
                        ns1:maxCount 1 ;
                        ns1:path <http://schema.org/encodingFormat> ;
                        ns1:pattern "^(application|audio|font|image|message|model|multipart|text|video)/[A-Za-z0-9]+" ],
                    [ ns1:datatype xsd:string ;
                        ns1:description "The distribution name." ;
                        ns1:path <http://schema.org/name> ],
                    [ ns1:maxCount 1 ;
                        ns1:node <https://neuroshapes.org/commons/quantitativevalue/shapes/PositiveQuantitativeValueShape> ;
                        ns1:path <http://schema.org/contentSize> ],
                    [ ns1:node <https://neuroshapes.org/commons/distribution/shapes/DigestShape> ;
                        ns1:path <https://neuroshapes.org/digest> ] ] ) .

<https://neuroshapes.org/commons/distribution/shapes/DigestShape> a ns1:NodeShape ;
    ns1:property [ ns1:datatype xsd:string ;
            ns1:description "The digest value." ;
            ns1:maxCount 1 ;
            ns1:minCount 1 ;
            ns1:name "Digest" ;
            ns1:path <http://schema.org/value> ],
        [ ns1:datatype xsd:string ;
            ns1:description "The digest algorithm." ;
            ns1:maxCount 1 ;
            ns1:minCount 1 ;
            ns1:name "Algorithm" ;
            ns1:path <http://schema.org/algorithm> ] .

